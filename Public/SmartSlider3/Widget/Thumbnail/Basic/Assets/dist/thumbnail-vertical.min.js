N2D("SmartSliderWidgetThumbnailDefaultVertical","SmartSliderWidget",function(n,o){"use strict";var i=!1,a={videoDark:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#000" opacity=".6"/><path fill="#FFF" d="M19.8 32c-.124 0-.247-.028-.36-.08-.264-.116-.436-.375-.44-.664V16.744c.005-.29.176-.55.44-.666.273-.126.592-.1.84.07l10.4 7.257c.2.132.32.355.32.595s-.12.463-.32.595l-10.4 7.256c-.14.1-.31.15-.48.15z"/></svg>'};function t(t,i){this.key="thumbnail",this.parameters=n.extend({captionSize:0,minimumThumbnailCount:1.5,invertGroupDirection:0},i),N2Classes.SmartSliderWidget.prototype.constructor.call(this,t)}((t.prototype=Object.create(N2Classes.SmartSliderWidget.prototype)).constructor=t).prototype.onStart=function(){this.currentI=0,this.offset=0,this.group=parseInt(this.parameters.group),this.$widget=this.slider.sliderElement.find(".nextend-thumbnail-default"),this.bar=this.$widget.find(".nextend-thumbnail-inner"),this.scroller=this.bar.find(".nextend-thumbnail-scroller"),this.$groups=n();for(var t=0;t<this.group;t++)this.$groups=this.$groups.add(n('<div class="nextend-thumbnail-scroller-group"></div>').appendTo(this.scroller));this.$previousButton=this.$widget.find(".nextend-thumbnail-previous").on("click",this.previousPane.bind(this)),this.$nextButton=this.$widget.find(".nextend-thumbnail-next").on("click",this.nextPane.bind(this)),this.slider.stages.done("BeforeShow",this.onBeforeShow.bind(this)),this.slider.stages.done("WidgetsReady",this.onWidgetsReady.bind(this))},t.prototype.renderThumbnails=function(){var t;this.parameters.invertGroupDirection&&(t=Math.ceil(this.slider.visibleRealSlides.length/this.group));for(var i=0;i<this.slider.visibleRealSlides.length;i++){var e,s=this.slider.visibleRealSlides[i],h=n('<div class="'+this.parameters.slideStyle+' n2-ow" style="'+this.parameters.containerStyle+'"></div>');this.parameters.invertGroupDirection?h.appendTo(this.$groups.eq(Math.floor(i/t))):h.appendTo(this.$groups.eq(i%this.group)),h.data("slide",s),s.$thumbnail=h,this.parameters.thumbnail!==o&&(e=s.getThumbnailType(),e=a[e]!==o?a[e]:"",n('<div class="n2-ss-thumb-image n2-ow" style="width:'+this.parameters.thumbnail.width+"px; height:"+this.parameters.thumbnail.height+"px;"+this.parameters.thumbnail.code+'">'+e+"</div>").css("background-image","url('"+s.getThumbnail()+"')").appendTo(h)),this.parameters.caption!==o&&(e=n('<div class="'+this.parameters.caption.styleClass+"n2-ss-caption n2-ow n2-caption-"+this.parameters.caption.placement+'" style="'+this.parameters.caption.style+'"></div>'),"before"===this.parameters.caption.placement?e.prependTo(h):e.appendTo(h),this.parameters.title!==o&&e.append('<div class="n2-ow '+this.parameters.title.font+'">'+s.getTitle()+"</div>"),this.parameters.description===o||(s=s.getDescription())&&e.append('<div class="n2-ow '+this.parameters.description.font+'">'+s+"</div>"))}var r="universalclick";"mouseenter"===this.parameters.action?r="universalenter":this.slider.hasTouch()&&(r="n2click"),this.dots=this.scroller.find(".nextend-thumbnail-scroller-group > div").on(r,this.onDotClick.bind(this)),this.images=this.dots.find(".n2-ss-thumb-image")},t.prototype.onTap=function(t){i||(n(t.target).trigger("n2click"),i=!0,setTimeout(function(){i=!1},500))},t.prototype.onBeforeShow=function(){var t=!1;switch(this.parameters.area){case 5:t="left";break;case 8:t="right"}t&&(this.offset=parseFloat(this.$widget.data("offset")),this.slider.responsive.addHorizontalSpacingControl(t,this)),this.renderThumbnails(),this.slider.hasTouch()&&(N2Classes.EventBurrito(this.$widget.get(0),{mouse:!0,axis:"y",start:function(){this.bar.height();this._touch={start:parseInt(this.scroller.css("top")),max:0};var t=this.getScrollerHeight(),i=this.thumbnailDimension.height*Math.ceil(this.dots.length/this.group);t<i&&(this._touch.max=-(i-t)),this._touch.current=this._touch.start}.bind(this),move:function(t,i,e,s,h){return this._touch.current=Math.max(this._touch.max,Math.min(0,this._touch.start+e.y)),this.scroller.css("top",this._touch.current),5<Math.abs(e.y)}.bind(this),end:function(t,i,e,s,h){Math.abs(this._touch.start-this._touch.current)<40?this.resetPane():this._touch.current>this._touch.start?this.previousPane():this.nextPane(),Math.abs(e.x)<10&&Math.abs(e.y)<10?this.onTap(t):nextend.preventClick(),delete this._touch}.bind(this)}),this.slider.parameters.controls.drag||this.$widget.on("click",this.onTap.bind(this))),this.heightPercent=this.$widget.data("height-percent"),this.thumbnailDimension={width:this.dots.outerWidth(!0),height:this.dots.outerHeight(!0)},this.sideDimension=.25*this.thumbnailDimension.height,this.scroller.width(this.thumbnailDimension.width*this.group),this.bar.width(this.scroller.outerWidth(!0)),this.verticalSpacing=this.bar.outerHeight()-this.bar.height(),this.slider.responsive.addFilter("SliderHeight",this.verticalFilterSliderHeight.bind(this)),this.slider.sliderElement.on({SlideWillChange:this.onSlideSwitch.bind(this),visibleRealSlidesChanged:this.onVisibleRealSlidesChanged.bind(this)})},t.prototype.onWidgetsReady=function(){this.activateDots(this.slider.currentSlide.index)};var e=!(t.prototype.filterSliderVerticalCSS=function(t){var i;this.slider.visibleRealSlides.length&&(this.itemsPerPane=Math.floor(this.getScrollerHeight()/this.thumbnailDimension.height),this.itemsPerPane<this.dots.length/this.group&&(this.itemsPerPane=Math.floor((this.getScrollerHeight()-2*this.sideDimension)/this.thumbnailDimension.height)),i=this.slider.responsive.dynamicHeightSlide||this.slider.currentSlide,this.currentI=i.index,t.push(new N2Classes.CSSData(this.scroller,{top:this.getScrollerTargetTop(this.getPaneByIndex(this.currentI)),height:this.thumbnailDimension.height*Math.ceil(this.dots.length/this.group)})))});return t.prototype.onDotClick=function(t){nextend.shouldPreventClick||(e||(this.slider.directionalChangeToReal(n(t.currentTarget).data("slide").index),e=!0),setTimeout(function(){e=!1}.bind(this),400))},t.prototype.onSlideSwitch=function(t,i){this.activateDots(i.index),this.goToDot(this.slider.getRealIndex(i.index))},t.prototype.activateDots=function(t){this.dots.removeClass("n2-active");for(var i=this.slider.slides[t].slides,e=0;i.length>e;e++)i[e].$thumbnail.addClass("n2-active")},t.prototype.resetPane=function(){this.goToDot(this.currentI)},t.prototype.previousPane=function(){this.goToDot(this.currentI-this.itemsPerPane*this.group)},t.prototype.nextPane=function(){this.goToDot(this.currentI+this.itemsPerPane*this.group)},t.prototype.verticalFilterSliderHeight=function(t){return this.isVisible()?Math.max(t,this.parameters.minimumThumbnailCount*this.thumbnailDimension.height):t},t.prototype.getPaneByIndex=function(t){return t=Math.max(0,Math.min(this.dots.length-1,t)),this.parameters.invertGroupDirection?Math.floor(t%Math.ceil(this.dots.length/this.group)/this.itemsPerPane):Math.floor(t/this.group/this.itemsPerPane)},t.prototype.getScrollerTargetTop=function(t){var i=0;t===Math.floor((this.dots.length-1)/this.group/this.itemsPerPane)?(i=-(t*this.itemsPerPane*this.thumbnailDimension.height),0===t?this.$previousButton.removeClass("n2-active"):this.$previousButton.addClass("n2-active"),this.$nextButton.removeClass("n2-active")):(0<t?(i=-(t*this.itemsPerPane*this.thumbnailDimension.height-this.sideDimension),this.$previousButton.addClass("n2-active")):(i=0,this.$previousButton.removeClass("n2-active")),this.$nextButton.addClass("n2-active"));var e=this.getScrollerHeight(),t=this.thumbnailDimension.height*Math.ceil(this.dots.length/this.group);return e<t&&(i=Math.max(i,-(t-e))),i},t.prototype.goToDot=function(t){this.tween&&this.tween.progress()<1&&this.tween.pause(),this.tween=NextendTween.to(this.scroller,.5,{top:this.getScrollerTargetTop(this.getPaneByIndex(t))}),this.currentI=t},t.prototype.refreshSliderSize=function(t){},t.prototype.getSize=function(){return this.$widget.width()+this.offset},t.prototype.onVisibleRealSlidesChanged=function(){this.dots.remove(),this.renderThumbnails()},t.prototype.calculateDimensions=function(t){var i;this.isVisible()?(t[this.key+"width"]=this.$widget.width(),i=this.heightPercent?Math.floor(t.sliderInnerHeight*this.heightPercent/100):this.bar.height(),t[this.key+"height"]=i):(t[this.key+"width"]=0,t[this.key+"height"]=0)},t.prototype.getScrollerHeight=function(){return this.heightPercent?Math.ceil(this.slider.responsive.resizeContext.sliderHeight*this.heightPercent/100)-this.verticalSpacing:this.scroller.height()},t});