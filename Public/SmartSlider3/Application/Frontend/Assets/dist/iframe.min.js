"function"!=typeof window.n2SSIframeLoader&&(void 0===window.jQuery&&void 0!==window.parent&&(window.jQuery=window.parent.jQuery),function(o){var i=[],e=window.addEventListener?"addEventListener":"attachEvent";function t(e,t){this.i=t,this.frame=e,this.$frame=o(e),this.$parent=this.$frame.parent(),this.window=e.ownerDocument.defaultView,this.document=this.window.document}window[e]("attachEvent"==e?"onmessage":"message",function(e){for(var t=0;t<i.length;t++)i[t]&&i[t].match(e.source)&&i[t].message(e[e.message?"message":"data"])}),t.prototype.match=function(e){return e===(this.frame.contentWindow||this.frame.contentDocument)&&(this.frameContent=this.frame.contentWindow||this.frame.contentDocument,!0)},t.prototype.message=function(e){switch(e.key){case"setLocation":"function"==typeof this.window.zajax_goto?this.window.zajax_goto(e.location):this.window.location=e.location;break;case"ready":this.frameContent.postMessage({key:"ackReady",windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight},"*"),o(window).on("resize.slider"+this.i,function(){this.frameContent.postMessage({key:"windowSize",windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight},"*")}.bind(this));break;case"resize":this.$parent.css("margin",e.margin),e.fullPage?this.fullpage!==e.fullPage&&(this.fullpage=e.fullPage,this.$verticalOffsetSelectors=o(e.focus.offsetTop).add(e.focus.offsetBottom),this.resizeFullPage(),o(this.window).on("resize.n2-ss-iframe-"+this.i,this.resizeFullPage.bind(this))):this.fullpage=0,this.$frame.css({height:e.height}),e.forceFull&&this.forcefull!==e.forceFull&&(this.forcefull=e.forceFull,o("body").css("overflow-x","hidden"),this.$fullWidthTo=o(".edit-post-visual-editor,.fl-responsive-preview .fl-builder-content"),this.resizeFullWidth(),o(this.window).on("resize.n2-ss-iframe-"+this.i,this.resizeFullWidth.bind(this)),this.watchWidth())}},t.prototype.watchWidth=function(){if(this.$fullWidthTo.length)if(void 0!==this.window.ResizeObserver){var t=0;this.observer=new ResizeObserver(function(e){e.forEach(function(e){t!==e.contentRect.width&&(t=e.contentRect.width,this.resizeFullWidth())}.bind(this))}.bind(this)),this.observer.observe(this.$fullWidthTo[0])}else try{this.$resizeObserverIframe=o('<iframe class="bt_skip_resize intrinsic-ignore" title="Resize helper" sandbox="allow-same-origin allow-scripts" style="margin:0 !important;padding:0;border:0;display:block;width:100%;height:0;min-height:0 !important;max-height:0;"></iframe>').on("load",function(e){var i=0,n=o(e.target.contentWindow||e.target.contentDocument.defaultView).on("resize",function(e){var t=n.width();i!==t&&(i=t,this.resizeFullWidth())}.bind(this))}.bind(this)).appendTo(this.$fullWidthTo[0])}catch(e){}},t.prototype.exists=function(){return!!o.contains(this.document.body,this.frame)||(i[this.i]=!1,o(this.window).off(".n2-ss-iframe-"+this.i),this.observer&&(this.observer.unobserve(this.$fullWidthTo[0]),delete this.observer),this.$resizeObserverIframe&&(this.$resizeObserverIframe.remove(),delete this.$resizeObserverIframe),!1)},t.prototype.resizeFullWidth=function(){var e,t,i,n,s;this.exists()&&(s=n=0,e="rtl"===o("html").attr("dir"),this.$fullWidthTo.length&&(n=(i=this.$fullWidthTo[0].getBoundingClientRect()).width,s=e?(this.document.body.clientWidth||this.document.documentElement.clientWidth)-i.right:i.left),t=0<n?n:this.document.body.clientWidth||this.document.documentElement.clientWidth,n=(i=this.$frame.parent())[0].getBoundingClientRect(),s=-(e?(this.document.body.clientWidth||this.document.documentElement.clientWidth)-n.right:n.left)-parseInt(i.css("paddingLeft"))-parseInt(i.css("borderLeftWidth"))+s,this.$frame.css({marginLeft:s,marginRight:s,maxWidth:"none"}).width(t))},t.prototype.resizeFullPage=function(e){if(this.exists()){var t=window.innerHeight;window.parent!==window&&(t=Math.min(t,window.screen.height));for(var i=0;i<this.$verticalOffsetSelectors.length;i++)t-=this.$verticalOffsetSelectors.eq(i).outerHeight();this.frameContent.postMessage({key:"clientHeight",clientHeight:t},"*"),this.$frame.height(t)}},window.n2SSIframeLoader=function(e){i.push(new t(e,i.length))}}(window.jQuery));